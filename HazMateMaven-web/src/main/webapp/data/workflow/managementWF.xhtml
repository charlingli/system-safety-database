<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <body>
        <ui:composition template="./../../templates/masterTemplate.xhtml">
            <ui:define name="content">
                <h:form id="wfForm">
                    <div class="pagePath"><h:outputText value="#{pagePath_MB.pageHtmlPath}" escape="false"/></div>
                    <p:dialog id="statusDialog" width="120px" widgetVar="statusOverlay" draggable="false" closable="false" resizable="false" showHeader="false" style="min-width: 8em; min-height: 8em">
                        <div class="progress-back">
                            <div class="progress-front-1"></div>
                            <div class="progress-front-2"></div>
                            <div class="progress-front-3"></div>
                            <div class="progress-front-4"></div>
                        </div>
                    </p:dialog>
                    <p:dialog id="detailDialog" header="Workflow Detail" widgetVar="detailOverlay" height="70vh" width="90vw" closeOnEscape="true">
                        <p:panel id="workflowPanel" styleClass="detailHazardPanel">
                            <div class="p-heading-spacer">
                                <p:outputLabel styleClass="p-heading" value="Viewing details of the workflow:"/>
                            </div>
                            <p:panelGrid columns="4" class="detailTable" columnClasses="label,,label"> 
                                <p:outputLabel value="Workflow ID: "/>
                                <p:outputLabel value="#{managementWF_MB.detailWF.wfId}"/>
                                <p:outputLabel value="Comment 1:"/>
                                <p:outputLabel value="#{managementWF_MB.detailWF.wfComment1}"/>
                                <p:outputLabel value="Workflow Object Type &amp; Id "/>
                                <p:outputLabel value="#{managementWF_MB.detailWF.wfObjectName} : #{managementWF_MB.detailWF.wfObjectId}"/>
                                <p:outputLabel value="Comment 2:"/>
                                <p:outputLabel value="#{managementWF_MB.detailWF.wfComment2}"/>
                                <p:outputLabel value="Workflow Status &amp; Last Update "/>
                                <p:outputLabel value="#{managementWF_MB.detailWF.wfStatus == 'O' ? 'Open' : managementWF_MB.detailWF.wfStatus == 'A' ? 'Approved' : managementWF_MB.detailWF.wfStatus == 'R' ? 'Rejected' : managementWF_MB.detailWF.wfStatus == 'I' ? 'Open' : managementWF_MB.detailWF.wfStatus} as of #{managementWF_MB.detailWF.wfUpdatedDateTime == null ? managementWF_MB.detailWF.wfAddedDateTime : managementWF_MB.detailWF.wfUpdatedDateTime}"/>
                                <p:outputLabel value="Comment 3:"/>
                                <p:outputLabel value="#{managementWF_MB.detailWF.wfComment3}"/>
                                <p:outputLabel value="Workflow Owner "/>
                                <p:outputLabel value="#{managementWF_MB.detailWF.wfUserIdAdd.firstName} #{managementWF_MB.detailWF.wfUserIdAdd.lastName}"/>
                                <p:outputLabel value="Comment 4:"/>
                                <p:outputLabel value="#{managementWF_MB.detailWF.wfComment4}"/>
                            </p:panelGrid>
                        </p:panel>
                        <p:panel styleClass="detailHazardPanel">
                            <h:outputText value="The following users are associated with this workflow:" class="p-emphasis"/>
                            <p:dataTable value="#{managementWF_MB.detailLine}" var="line" emptyMessage="No updates have been made to this workflow.">
                                <p:column headerText="User" styleClass="small">
                                    <p:outputLabel value="#{line.wfUserIdApprover.firstName} #{line.wfUserIdApprover.lastName}"/>
                                </p:column>
                                <p:column headerText="Decision" styleClass="small">
                                    <p:outputLabel value="#{line.wfApproverDecisionId.wfDecisionName}"/>
                                </p:column>
                                <p:column headerText="Comments" styleClass="normal">
                                    <p:outputLabel value="#{line.wfApprovalComment}"/>
                                </p:column>
                                <p:column headerText="Timestamp" styleClass="normal">
                                    <p:outputLabel value="#{line.wfDateTimeDecision}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </p:dialog>
                    <p:dialog id="objectDialog" header="Hazard Detail" widgetVar="objectOverlay" height="70vh" width="90vw" closeOnEscape="true">
                        <p:panel styleClass="detailHazardPanel">
                            <div class="p-heading-spacer">
                                <p:outputLabel styleClass="p-heading" value="Viewing details of the hazard:"/>
                            </div>
                            <p:panelGrid columns="2" class="detailTable" columnClasses="label"> 
                                <p:outputLabel value="ID: "/>
                                <p:outputLabel value="#{managementWF_MB.detailHazard.hazardId}"/>
                                <p:outputLabel value="Description: "/>
                                <p:outputLabel value="#{managementWF_MB.detailHazard.hazardDescription}"/>
                                <p:outputLabel value="Comments: "/>
                                <p:outputLabel value="#{managementWF_MB.detailHazard.hazardComment}"/>
                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="hazardPanel" class="detailHazardPanel">
                            <div class="p-emphasis-spacer">
                                <h:outputText styleClass="p-emphasis" value="Hazard Information:"/>
                            </div>
                            <p:dataTable value="#{managementWF_MB.detailHazard}" emptyMessage="No hazard found.">
                                <p:column headerText="SBS Code" styleClass="small">
                                    <ui:repeat var="node" value="#{managementWF_MB.viewSbsCondensed()}">#{node}</ui:repeat>
                                </p:column>
                                <p:column headerText="Activity" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.hazardContextId.hazardContextName}"/>
                                </p:column>
                                <p:column headerText="Context" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.hazardActivity.activityName}"/>
                                </p:column>
                                <p:column headerText="Type" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.hazardTypeId.hazardTypeName}"/>
                                </p:column>
                                <p:column headerText="Status" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.hazardStatusId.hazardStatusName}"/>
                                </p:column>
                                <p:column headerText="Owner" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.ownerId.ownerName}"/>
                                </p:column>
                            </p:dataTable>
                            <div class="p-emphasis-spacer">
                                <h:outputText styleClass="p-emphasis" value="Location Information:"/>
                            </div>
                            <p:dataTable value="#{managementWF_MB.detailHazard}" emptyMessage="No location details found.">
                                <p:column headerText="Project" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.hazardLocation.projectId.projectName}"/>
                                </p:column>
                                <p:column headerText="Location" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.hazardLocation.locationName}"/>
                                </p:column>
                                <p:column headerText="Grade Separation" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.hazardLocation.locationGradeSeparation.gradeSeparationName}"/>
                                </p:column>
                                <p:column headerText="Construction Type" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.hazardLocation.locationConstructionType.constructionTypeName}"/>
                                </p:column>
                                <p:column headerText="Change Type" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.hazardLocation.locationChangeType.changeTypeName}"/>
                                </p:column>
                            </p:dataTable>
                            <div class="p-emphasis-spacer">
                                <h:outputText styleClass="p-emphasis" value="Risk Information:"/>
                            </div>
                            <p:dataTable value="#{managementWF_MB.detailHazard}" emptyMessage="No risk details found.">
                                <p:column headerText="Class" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.riskClassId.riskClassName}"/>
                                </p:column>
                                <p:column headerText="Current Frequency" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.riskCurrentFrequencyId.frequencyScore}"/>
                                </p:column>
                                <p:column headerText="Current Severity" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.riskCurrentSeverityId.severityScore}"/>
                                </p:column>
                                <p:column headerText="Current Score" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.riskCurrentScore}"/>
                                </p:column>
                            </p:dataTable>
                            <p:dataTable value="#{managementWF_MB.detailHazard}" emptyMessage="No risk details found.">
                                <p:column headerText="Class" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.riskClassId.riskClassName}"/>
                                </p:column>
                                <p:column headerText="Target Frequency" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.riskTargetFrequencyId.frequencyScore}"/>
                                </p:column>
                                <p:column headerText="Target Severity" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.riskTargetSeverityId.severityScore}"/>
                                </p:column>
                                <p:column headerText="Target Score" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.detailHazard.riskTargetScore}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panel id="causePanel" class="detailHazardPanel">
                            <div class="p-emphasis-spacer">
                                <h:outputText styleClass="p-emphasis" value="The following causes are associated with the current hazard:"/>
                            </div>
                            <p:dataTable value="#{managementWF_MB.detailCauses}" var="CA" emptyMessage="No causes are associated with this hazard.">
                                <p:column headerText="ID" styleClass="small">
                                    <p:outputLabel value="#{CA.dbCause.causeId}"/>
                                </p:column>
                                <p:column headerText="Description" styleClass="normal">
                                    <p:outputLabel value="#{CA.dbCause.causeDescription}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panel id="consequencePanel" styleClass="detailHazardPanel">
                            <h:outputText value="The following consequences are associated with the current hazard:" class="p-emphasis"/>
                            <p:dataTable value="#{managementWF_MB.detailConsequences}" var="CQ" emptyMessage="No consequences are associated with this hazard.">

                                <p:column headerText="ID" styleClass="small">
                                    <p:outputLabel value="#{CQ.dbConsequence.consequenceId}"/>
                                </p:column>
                                <p:column headerText="Description" styleClass="normal">
                                    <p:outputLabel value="#{CQ.dbConsequence.consequenceDescription}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panel id="controlPanel" styleClass="detailHazardPanel">
                            <h:outputText value="The following controls are associated with the current hazard:" class="p-emphasis"/>
                            <p:dataTable value="#{managementWF_MB.detailControls}" var="CO" emptyMessage="No controls are associated with this hazard.">
                                <p:column headerText="ID" styleClass="small">
                                    <p:outputLabel value="#{CO.dbControl.controlId}"/>
                                </p:column>
                                <p:column headerText="Description" styleClass="normal">
                                    <p:outputLabel value="#{CO.dbControl.controlDescription}"/>
                                </p:column>
                                <p:column headerText="Owner" styleClass="small">
                                    <p:outputLabel value="#{CO.dbControl.ownerId.ownerName}"/>
                                </p:column>
                                <p:column headerText="Hierarchy" styleClass="small">
                                    <p:outputLabel value="#{CO.dbControl.controlHierarchyId.controlHierarchyName}"/>
                                </p:column>
                                <p:column headerText="Type" styleClass="small">
                                    <p:outputLabel value="#{CO.controlType == 'P' ? 'Preventive' : CO.controlType == 'M' ? 'Mitigative' : CO.controlType}"/>
                                </p:column>
                                <p:column headerText="Recommendation" styleClass="small">
                                    <p:outputLabel value="#{CO.controlRecommendId.controlRecommendName}"/>
                                </p:column>
                                <p:column headerText="Justification" styleClass="normal">
                                    <p:outputLabel value="#{CO.controlJustify}"/>
                                </p:column>
                                <p:column headerText="Status" styleClass="small">
                                    <p:outputLabel value="#{CO.controlExistingOrProposed == 'P' ? 'Proposed' : CO.controlExistingOrProposed == 'E' ? 'Existing' : CO.controlExistingOrProposed}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panel id="filesPanel" styleClass="detailHazardPanel">
                            <h:outputText value="The following files are linked to the current hazard:" class="p-emphasis"/>
                            <p:dataTable value="#{managementWF_MB.fileHeaders}" var="file" emptyMessage="No files are linked to this hazard.">
                                <p:column headerText="ID" styleClass="small">
                                    <p:outputLabel value="#{file.fileId}"/>
                                </p:column>
                                <p:column headerText="Name" styleClass="normal">
                                    <p:outputLabel value="#{file.fileName}"/>
                                </p:column>
                                <p:column headerText="Description" styleClass="normal">
                                    <p:outputLabel value="#{file.fileDescription}"/>
                                </p:column>
                                <p:column headerText="Extension" styleClass="small">
                                    <p:outputLabel value="#{file.fileExtension}"/>
                                </p:column>
                                <p:column headerText="Size" styleClass="small">
                                    <p:outputLabel value="#{managementWF_MB.parseSize(file.fileSize)}"/>
                                </p:column>
                                <p:column headerText="Download" styleClass="small">
                                    <p:commandButton action="#{managementWF_MB.handleDownload(file)}" immediate="true" ajax="false" icon="fa fa-download"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </p:dialog>
                    <p:fieldset id="fieldset" legend="Search parameters" toggleable="true" toggleSpeed="1000" styleClass="searchFieldset" collapsed="true">
                        <p:panel styleClass="searchPanel">
                            <h:panelGrid columns="2" columnClasses="left,middle">
                                <p:outputLabel value="Workflow ID: "/>
                                <p:inputText value="#{managementWF_MB.wfID}"/>
                                <p:outputLabel value="Workflow Object ID: "/>
                                <p:inputText value="#{managementWF_MB.wfObjectID}"/>
                                <p:outputLabel value="Comment 1:"/>
                                <p:inputText value="#{managementWF_MB.wfComment1}"/>
                                <p:outputLabel value="Comment 2:"/>
                                <p:inputText value="#{managementWF_MB.wfComment2}"/>
                                <p:outputLabel value="Comment 3:"/>
                                <p:inputText value="#{managementWF_MB.wfComment3}"/>
                                <p:outputLabel value="Comment 4:"/>
                                <p:inputText value="#{managementWF_MB.wfComment4}"/>
                                <p:outputLabel value="Workflow Status:"/>
                                <p:selectOneMenu class="searchInput" value="#{managementWF_MB.wfStatus}">
                                    <f:selectItem itemValue="A" itemLabel="Approved"/>
                                    <f:selectItem itemValue="R" itemLabel="Rejected"/>
                                    <f:selectItem itemValue="I" itemLabel="Information Requested"/>
                                    <f:selectItem itemValue="O" itemLabel="Open"/>
                                </p:selectOneMenu>
                                
                            </h:panelGrid>
                        </p:panel>
                    </p:fieldset>
                    <div class="panelButtons">
                        <p:commandButton value="Search Workflows" action="#{managementWF_MB.searchWorkflows()}" update="wfForm" onstart="PF('statusOverlay').show()" oncomplete="PF('statusOverlay').hide()"/>
                    </div>
                    <p:dataTable value="#{managementWF_MB.listWF}" id="wfTable" widgetVar="wfTable"  var="wf" emptyMessage="No workflow entries found." styleClass="resultPanel" selection="#{managementWF_MB.selectWF}" rowSelectMode="checkbox" disabledSelection="#{wf.wfStatus != 'O'}" rowKey="#{wf.wfId}" scrollable="true" scrollHeight="600">
                        <f:facet name="header">
                            <p:outputPanel>
                                <h:outputText value="All workflow entries:"/>
                            </p:outputPanel>
                        </f:facet>
                        <p:ajax event="rowSelect" update=":wfForm"/>
                        <p:ajax event="rowUnselect" update=":wfForm"/>
                        <p:ajax event="rowSelectCheckbox" update=":wfForm"/>
                        <p:ajax event="rowUnselectCheckbox" update=":wfForm"/>
                        <p:ajax event="toggleSelect" update=":wfForm"/>
                        <p:column selectionMode="multiple" style="width:16px;text-align:center"/>
                        <p:column headerText="Workflow ID" styleClass="small">
                            <p:commandLink id="wfAjax" update=":wfForm" actionListener="#{managementWF_MB.showDetail(wf)}" onstart="PF('statusOverlay').show()" oncomplete="PF('statusOverlay').hide(); PF('detailOverlay').show()">
                                <h:outputText value="#{wf.wfId}"/>
                            </p:commandLink>
                            <p:tooltip for="wfAjax">
                                <i class="fa fa-search"/>
                                <h:outputText value=" View Workflow"/>
                            </p:tooltip>
                        </p:column>
                        <p:column headerText="Workflow Object Type &amp; ID" styleClass="small">
                            <p:commandLink id="objAjax" update=":wfForm" actionListener="#{managementWF_MB.showHazard(wf)}" onstart="PF('statusOverlay').show()" oncomplete="PF('statusOverlay').hide(); PF('objectOverlay').show()">
                                <h:outputText value="#{wf.wfObjectName}: #{wf.wfObjectId}"/>
                            </p:commandLink>
                            <p:tooltip for="objAjax">
                                <i class="fa fa-search"/>
                                <h:outputText value=" View Hazard"/>
                            </p:tooltip>
                        </p:column>
                        <p:column headerText="Workflow Status &amp; Last Update " styleClass="small">
                            <p:outputLabel value="#{wf.wfStatus == 'O' ? 'Open' : wf.wfStatus == 'A' ? 'Approved' : wf.wfStatus == 'R' ? 'Rejected' : wf.wfStatus == 'I' ? 'Information Requested' : wf.wfStatus} as of #{wf.wfUpdatedDateTime == null ? wf.wfAddedDateTime : wf.wfUpdatedDateTime}"/>
                        </p:column>
                        <p:column headerText="Workflow Owner" styleClass="small">
                            <p:outputLabel value="#{wf.wfUserIdAdd.firstName} #{wf.wfUserIdAdd.lastName}"/>
                        </p:column>
                        <p:column headerText="Workflow Comments">
                            <p:outputLabel value="#{wf.wfComment1}"/><br />
                            <p:outputLabel value="#{wf.wfComment2}"/><br />
                            <p:outputLabel value="#{wf.wfComment3}"/><br />
                            <p:outputLabel value="#{wf.wfComment4}"/>
                        </p:column>
                        <p:column headerText="Approval Actions" styleClass="small">
                            <p:commandButton id="approveButton" actionListener="#{managementWF_MB.prepareDecision(wf, 'A')}" oncomplete="PF('singleOverlay').show('#{component.clientId}')" update="wfForm" disabled="#{wf.wfStatus != 'O'}" icon="fa fa-check" styleClass="approveButton"/> 
                            <p:commandButton id="rejectButton" actionListener="#{managementWF_MB.prepareDecision(wf, 'R')}" oncomplete="PF('singleOverlay').show('#{component.clientId}')" update="wfForm" disabled="#{wf.wfStatus != 'O'}" icon="fa fa-ban" styleClass="rejectButton"/> 
                            <p:commandButton id="requestButton" actionListener="#{managementWF_MB.prepareDecision(wf, 'I')}" oncomplete="PF('singleOverlay').show('#{component.clientId}')" update="wfForm" disabled="#{wf.wfStatus != 'O'}" icon="fa fa-info" styleClass="requestButton" style="#{wf.wfCompleteMethod == 'HazardApprovalWF' ? '' : 'visibility: hidden'}" />
                            <p:tooltip for="approveButton">
                                <h:outputText value="Approve Workflow"/>
                            </p:tooltip>
                            <p:tooltip for="rejectButton">
                                <h:outputText value="Reject Workflow"/>
                            </p:tooltip>
                            <p:tooltip for="requestButton">
                                <h:outputText value="Request Information"/>
                            </p:tooltip>
                        </p:column>
                        <f:facet name="footer">
                            <p:outputPanel styleClass="tableFooter">
                                <div class="left">
                                    <h:outputText value="Selected #{managementWF_MB.selectWF.size()} #{managementWF_MB.selectWF.size() == 1 ? 'workflow' : managementWF_MB.selectWF.size() == 0 ? 'workflows' : empty managementWF_MB.selectWF ? 'no workflows' : 'workflows'}"/>
                                </div>
                                <div class="right">
                                    <h:outputText value="Bulk actions: " />
                                    <p:commandButton id="approveAllButton" action="#{managementWF_MB.prepareDecisions(managementWF_MB.selectWF, 'A')}" oncomplete="PF('multipleOverlay').show('#{component.clientId}')" update="wfForm" disabled="#{managementWF_MB.selectWF.size() == 0 ? true : empty managementWF_MB.selectWF ? true : false}" icon="fa fa-check" styleClass="approveButton"/> 
                                    <p:commandButton id="rejectAllButton" action="#{managementWF_MB.prepareDecisions(managementWF_MB.selectWF, 'R')}" oncomplete="PF('multipleOverlay').show('#{component.clientId}')" update="wfForm" disabled="#{managementWF_MB.selectWF.size() == 0 ? true : empty managementWF_MB.selectWF ? true : false}" icon="fa fa-ban" styleClass="rejectButton"/> 
                                    <p:commandButton id="requestAllButton" action="#{managementWF_MB.prepareDecisions(managementWF_MB.selectWF, 'I')}" oncomplete="PF('multipleOverlay').show('#{component.clientId}')" update="wfForm" disabled="#{managementWF_MB.selectWF.size() == 0 ? true : empty managementWF_MB.selectWF ? true : managementWF_MB.checkRequest() ? true : false}" icon="fa fa-info" styleClass="requestButton"/>
                                    <p:tooltip for="approveAllButton">
                                        <h:outputText value="Approve selected workflows"/>
                                    </p:tooltip>
                                    <p:tooltip for="rejectAllButton">
                                        <h:outputText value="Reject selected workflows"/>
                                    </p:tooltip>
                                    <p:tooltip for="requestAllButton">
                                        <h:outputText value="Request information"/>
                                    </p:tooltip>
                                </div>
                            </p:outputPanel>
                        </f:facet>
                    </p:dataTable>
                    <p:overlayPanel widgetVar="singleOverlay" hideEffect="fade" dismissable="false" showCloseIcon="true">
                        <p:panelGrid columns="1" class="suggestionPanel">
                            <f:facet name="header">
                                <h:outputText value="#{managementWF_MB.approvalDecision == 'A' ? 'Approve with comments' : managementWF_MB.approvalDecision == 'R' ? 'Reject with comments' : managementWF_MB.approvalDecision == 'I' ? 'Request for information' : managementWF_MB.approvalDecision}"/>
                            </f:facet>
                            <h:outputText value="Leave a comment:"/>
                            <p:inputTextarea id="decisionComments" value="#{managementWF_MB.approvalComment}"/>
                            <p:commandButton value="#{managementWF_MB.approvalDecision == 'A' ? 'Approve' : managementWF_MB.approvalDecision == 'R' ? 'Reject' : managementWF_MB.approvalDecision == 'I' ? 'Request Information' : managementWF_MB.approvalDecision}" actionListener="#{managementWF_MB.sendDecision()}" update="wfForm" />
                        </p:panelGrid>
                    </p:overlayPanel>
                    <p:overlayPanel widgetVar="multipleOverlay" hideEffect="fade" dismissable="false" showCloseIcon="true">
                        <p:panelGrid columns="1" class="suggestionPanel">
                            <f:facet name="header">
                                <h:outputText value="#{managementWF_MB.approvalDecision == 'A' ? 'Approve with comments' : managementWF_MB.approvalDecision == 'R' ? 'Reject with comments' : managementWF_MB.approvalDecision == 'I' ? 'Request for information' : managementWF_MB.approvalDecision}"/>
                            </f:facet>
                            <h:outputText value="Leave a comment:"/>
                            <p:inputTextarea id="multipleComments" value="#{managementWF_MB.multipleComment}" />
                            <p:commandButton value="#{managementWF_MB.approvalDecision == 'A' ? 'Approve' : managementWF_MB.approvalDecision == 'R' ? 'Reject' : managementWF_MB.approvalDecision == 'I' ? 'Request Information' : managementWF_MB.approvalDecision}" actionListener="#{managementWF_MB.sendDecisions()}" update="wfForm" />
                        </p:panelGrid>
                    </p:overlayPanel>
                </h:form>
            </ui:define> 
        </ui:composition>
    </body>
</html>
